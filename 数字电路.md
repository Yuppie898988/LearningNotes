# 数字逻辑电路

## 门电路

### TTL与非门

![TTL与非门](https://raw.githubusercontent.com/Yuppie898988/LearningNotes-images/main/images/36781A6CD203DA42DC6CF5505268FD92.png)
<center>TTL与非门</center>

- 工作状态：

|输入|$T_1$|$T_2$|$T_3$|$T_4$|$T_5$|
|-|-|-|-|-|-|
|至少一个低电平|深度饱和|截止|微饱和|导通|截止|
|全高电平|倒置|饱和|导通|截止|深度饱和|

**一般以 $T_5$ 的工作状态表示与非门的状态**

- TTL门电路工作速度比MOS快，但是输出为低电平时 $T_5$ 处于深度饱和状态，状态改变时存储电荷消散速度慢，从而影响工作速度

- 用**带有肖特基势垒二极管的三极管**代替 $T_1$、$T_2$、$T_3$、$T_5$，**限制饱和深度**，**提高工作速度**

#### 相关概念

- 输出高电平 $V_{OH}$：与非门空载时输出的高电平

- 输出低电平 $V_{OL}$：与非门空载时输出的低电平

- 关门电平 $V_{OFF}$：保持与非门处于截止状态（$V_{OH}$）的**输入低电平**的**最大值**

- 开门电平 $V_{ON}$：保持与非门处于开门状态（$V_{OL}$）的**输入高电平**的**最小值**

- 噪声容限 $V_N$：
  - 低电平噪声容限：
    保证输出高电平条件下，输入低电平上允许的最大干扰电压：$V_{NL} = V_{OFF} - V_{OL(max)}$
  - 高电平噪声容限：
    保证输出低电平条件下，输入高电平上允许的最大干扰电压：$V_{NH} = V_{OH(min)} - V_{ON}$

- 传输延迟时间 $t_{pd}$：

![TTL与非门的延迟时间](https://raw.githubusercontent.com/Yuppie898988/LearningNotes-images/main/images/20210314144020.png)
<center>TTL与非门的延迟时间</center>

$$
t_{pd} = \frac{t_{PHL}+t_{PLH}}{2}
$$

#### 输入特性

- 关门电阻与开门电阻：
  - $V_1$上升到$V_{OFF}$时的电阻为$R_{OFF}$，一般为$0.91k\Omega$
  - $V_1$上升到$V_{ON}$时的电阻为$R_{ON}$，一般为$2.5k\Omega$
  - 与非门接输入电阻小于$R_{OFF}$则**输入低电平**；大于$R_{ON}$则**输入高电平**
  - 输入端悬空则**输入高电平**

- 低电平输入电流 $I_{IL}$：
$$
I_{IL} = - \frac{V_{CC}-V_{BE1}-V_{IL}}{R_1}
$$
当$V_{IL}=0$时，电流为输入短路电流$I_{IS}$，$I_{IL}$常用$I_{IS}$代替。
注意：
  - **$I_{IL}$大小和输入端并接个数无关**
  - **$I_{IL}$流出$T_1$管，为负值**

- 高电平输入电流 $I_{IH}$：
$I_{IH}$也称为输入灌电流
注意：
  - **流进$T_1$管的电流等于$I_{IH}$大小和与非门输入端并接个数的乘积**
  - **$I_{IH}$流入$T_1$管，为正值**

#### 输出特性

|输出电平|输出电流|方向|正负|
|-|-|-|-|
|低电平|灌电流|流入与非门|正|
|高电平|拉电流|流出与非门|负|

#### 扇出系数 $N$

$$
N = min\{N_L, N_H\}
$$

- 高电平扇出系数 $N_H$
$$
N_H = \frac{I_{OH}}{I_{IH}N_{输入端口数}}
$$
- 低电平扇出系数 $N_L$
$$
N_L = \frac{I_{OL}}{I_{IS}}
$$

#### OC门

集电极开路的门电路

![OC门](https://raw.githubusercontent.com/Yuppie898988/LearningNotes-images/main/images/20210314151651.png)
<center>OC门</center>

OC门相对于TTL门的优势：

1. TTL门并联后如果两个门输出电平不同，则会产生过大的电流，可能损坏门电路

2. TTL门有规定的电源电压（一般为+5V），输出高电平为固定值

3. 推拉式输出结构的电路负载能力小

计算并联OC门和负载之间的上拉电阻 $R_L$：

- 无论高低电平，OC门的输出电流方向均流进与非门

- 输出低电平时，按照一个OC门导通计算，只用考虑一个$I_{OL}$

- 对于负载输入电流要分情况讨论，详见《数字逻辑电路》P62.例2.3.2

---

### CMOS

#### MOS管

- 衬底与源极或者系统最低电位：防止衬底与源极PN结导通

#### CMOS

- 与非门：只要A、B有低电平，$T_1$、$T_2$串联电阻$R>R_{OFF}$，$T_3$、$T_4$并联电阻$R<R_{ON}$，则Y=1

![与非门](https://raw.githubusercontent.com/Yuppie898988/LearningNotes-images/main/images/20210314165737.png)
<center>CMOS与非门</center>

- 或非门：只要A、B有高电平，$T_1$、$T_2$并联电阻$R<R_{ON}$，$T_3$、$T_4$串联电阻$R>R_{OFF}$，则Y=0

![或非门](https://raw.githubusercontent.com/Yuppie898988/LearningNotes-images/main/images/20210314165853.png)
<center>CMOS或非门</center>

- 在每个输入端和输出端各增加一个反相器（缓冲器），带有缓冲器的门电路其**输出电阻**、**输出电平**及**电压传输特性**不受输入端状态影响

#### OD门

- 漏极开路，用于**输出缓冲/驱动器**或者**电平转换**

#### 注意事项

- **输入端禁止悬空**，不用时应**接地**或**通过几十千欧到几百千欧电阻接入$V_{DD}$**

- CMOS管未接电源时禁止加输入信号，防止输入端保护二极管损坏

---

### TTL与CMOS之间的连接

#### TTL驱动4000系列和74HC系列CMOS

核心在于提高TTL输出高电平

- 加上拉电阻，增大TTL输出高电平

- 加OC门，防止$V_{DD}$过高，超过TTL输出端最大承受电压

- 加电平偏移电路

#### 4000系列CMOS驱动74系列TTL

核心在于TTL的低电平输入电流过大，需要提高CMOS门电路输出低电平时的负载能力

- 加CMOS驱动器

- 加电流放大器

---

### 各类门电路对比

|名称|优点|缺点|能否并联|
|-|-|-|-|
|TTL|-|电源电压固定<br>输出高电平固定<br>负载能力较小|否|
|OC门|输出高电平可调<br>负载能力比TTL大|-|能|
|ECL|平均传输延迟时间可小于2ns，工作速度高<br>带负载能力强|功耗大<br>逻辑摆幅小<br>电平与其他TTL电路不兼容<br>噪声容限小|否|
|I^2^L|结构简单，集成度高<br>能在低电压、微电流下工作<br>功耗是目前双极型数字集成电路中功耗最低的|噪声容限小，抗干扰能力差<br>输出电压幅度小，0.6V左右<br>开关速度慢|能|
|CMOS|输入阻抗高<br>功耗低<br>电源电压范围宽<br>扇出系数大<br>抗干扰、辐射能力强<br>成本低|速度慢|否|

- 就目前所学来说，仅**OC门**、**OD门**、**三态门**可以直接并联使用
