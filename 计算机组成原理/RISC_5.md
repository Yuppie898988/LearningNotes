# RISC-5版

## 指令

### 知识点

- 1字节 = 8位；1字 = 4字节；双字 = 8字节 = 64位

- 32个64位寄存器

- RISC-V使用以字节为单位寻址
eg.编译`f = g + A[8]`，其中f,g,A的基址分别存放在x20,x21,x22中

```RISC-V
ld x9, 64(x22)
add x20, x21, x9
```

- RISC-V的指令都是**32位**长

### 指令表示

#### R型（用于寄存器）

|funct7|rs2|rs1|funct3|rd|opcode|
|-|-|-|-|-|-|
|7位|5位|5位|3位|5位|7位|

#### I型（用于带常数的算术指令）

|immediate|rs1|funct3|rd|opcode|
|-|-|-|-|-|
|12位(补码值)|5位|3位|5位|7位|

#### S型

|immediate[11:5]|rs2|rs1|funct3|immediate[4:0]|opcode|
|-|-|-|-|-|-|
|7位|5位|5位|3位|5位|7位|

eg.读取数值
`sd x9, 240(x10)`
$240_2 = 0000\ 1111\ 0000_2$，左边7位为111(十进制为8)，右边5位为10000（十进制为16）。相当于240右移5位，即：
$$
\frac{240}{2^5}=7 \cdots\cdots 16
$$
注：寄存器x9和x10存放于rs2和rs1

**详见《计算机组成与设计RISC-V版》P60例题**